[
  {
    "name": "categories",
    "type": "base",
    "schema": [
      {
        "name": "name",
        "type": "text",
        "required": true,
        "options": {
          "min": 1,
          "max": 100
        }
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX idx_category_name ON categories (name)"
    ]
  },
  {
    "name": "brands",
    "type": "base",
    "schema": [
      {
        "name": "name",
        "type": "text",
        "required": true,
        "options": {
          "min": 1,
          "max": 200
        }
      },
      {
        "name": "user",
        "type": "relation",
        "required": true,
        "options": {
          "collectionId": "_pb_users_auth_",
          "cascadeDelete": true,
          "maxSelect": 1
        }
      }
    ]
  },
  {
    "name": "wardrobe",
    "type": "base",
    "schema": [
      {
        "name": "name",
        "type": "text",
        "required": true,
        "options": {
          "min": 1,
          "max": 200
        }
      },
      {
        "name": "user",
        "type": "relation",
        "required": true,
        "options": {
          "collectionId": "_pb_users_auth_",
          "cascadeDelete": true,
          "maxSelect": 1
        }
      },
      {
        "name": "brand",
        "type": "relation",
        "required": false,
        "options": {
          "collectionId": "brands",
          "cascadeDelete": false,
          "maxSelect": 1
        }
      },
      {
        "name": "category",
        "type": "relation",
        "required": false,
        "options": {
          "collectionId": "categories",
          "cascadeDelete": false,
          "maxSelect": 1
        }
      },
      {
        "name": "image",
        "type": "file",
        "required": false,
        "options": {
          "maxSelect": 1,
          "maxSize": 5242880,
          "mimeTypes": ["image/jpeg", "image/png", "image/webp"]
        }
      }
    ],
    "listRule": "@request.auth.id != '' && user = @request.auth.id",
    "viewRule": "@request.auth.id != '' && user = @request.auth.id",
    "createRule": "@request.auth.id != ''",
    "updateRule": "@request.auth.id != '' && user = @request.auth.id",
    "deleteRule": "@request.auth.id != '' && user = @request.auth.id"
  },
  {
    "name": "outfits",
    "type": "base",
    "schema": [
      {
        "name": "name",
        "type": "text",
        "required": true,
        "options": {
          "min": 1,
          "max": 200
        }
      },
      {
        "name": "user",
        "type": "relation",
        "required": true,
        "options": {
          "collectionId": "_pb_users_auth_",
          "cascadeDelete": true,
          "maxSelect": 1
        }
      },
      {
        "name": "items",
        "type": "relation",
        "required": false,
        "options": {
          "collectionId": "wardrobe",
          "cascadeDelete": false,
          "maxSelect": 99
        }
      }
    ],
    "listRule": "@request.auth.id != '' && user = @request.auth.id",
    "viewRule": "@request.auth.id != '' && user = @request.auth.id",
    "createRule": "@request.auth.id != ''",
    "updateRule": "@request.auth.id != '' && user = @request.auth.id",
    "deleteRule": "@request.auth.id != '' && user = @request.auth.id"
  }
]

